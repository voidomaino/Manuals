# 程序结构设计

## 程序结构
```text
<FORTRAN 程序> ->   <主程序单元>
                    {<外部子程序单元>|
                    <模块单元>|
                    <数据块单元>}
<主程序单元> -> <PROGRAM 语句>
                <说明部分>
                <操作部分>
                <内部子程序部分>
                <END 语句>
<PROGRAM 语句> -> PROGRAM <程序名称>
<END 语句> -> END [PROGRAM [<程序名称>]]
```
**说明部分** 
包括程序中的各种类型说明语句。
如果一个名称没有说明，其在后面的程序中将无法使用。
说明部分可能出现
**内部数据类型** 说明语句、
**派生数据类型** 说明语句、
**数组类型** 说明语句和
**指针类型** 说明语句。

**操作部分** 
包括各种 **可执行语句** 。

**内部子程序部分** 
以 `CONTAINS` 语句开头，包含可被主程序单元调用的内部子程序。

**外部子程序单元** 
是由不包含在主程序单元、模块单元和其他外部子程序单元中的函数或子例行程序所构建的程序单元，
能够被其他程序单元调用执行。
外部子程序单元以 `FUNCTION` 或 `SUBROUTINE` 语句开头。

**模块单元** 
是由能够被其他程序单元访问的一组定义
（
数据实体定义、
数据类型定义、
过程定义或
过程接口定义
）
所构成的程序单元。
其中过程定义又称为模块子程序，允许被模块中其他模块子程序访问。

模块单元以 `MODULE` 语句开头。

**数据块单元** 
是命名公用区中变量指定初始值的程序单元，不可被执行。

数据块单元以 `BLOCK DATA` 语句开头。

## 程序结构

### 顺序结构

程序从第一行开始向下运行，最简单的结构。

### 选择结构

根据不同的条件判断结果来决定执行不同的分支语句。

可以通过 `IF` 语句和 `CASE` 语句创造这种结构。

### 循环结构

根据条件判断结果重复某个操作过程。

循环主要由两个部分组成，其中 **循环体** 是指重复执行的处理过程；
**循环变量** 在每个循环中发生改变，根据循环变量进行循环的控制。

循环次数确定，则循环称为 **计数型循环**，由 `DO` 语句实现；
循环次数不确定，则循环称为 **条件型循环**。

条件循环又有两种划分，
若先判断条件是否成立，再执行循环体，则为 **当型循环**，由 `DO WHILE` 语句实现；
若先执行循环体，再判断条件是否成立，则为 **直到型循环**。
两种循环的差别是，直到型循环体至少执行一次。

循环体中应至少有一条对循环条件有影响的语句，
或者有 `EXIT` 语句强制终止循环过程，
亦或有 `CYCLE` 语句跳转到循环开始，
否则将产生死循环。

### 随便结构

`GOTO` 语句能够在程序各处跳转，形成复杂的结构，但是这种方式太复杂混乱，
被认为是不规范的。
